<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signet Gateway | Secure Connection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #000000;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Security Shield Animation */
        .shield-ring {
            stroke-dasharray: 100;
            animation: rotate 4s linear infinite;
            transform-origin: center;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        /* Neural Mesh Animation */
        .node {
            animation: blink 3s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div className="text-center space-y-12">
        <div id="animation-container" class="flex justify-center">
            <!-- Dynamic Animation Inserted Here -->
        </div>

        <div class="space-y-4">
            <h1 id="status-text" class="text-2xl font-bold tracking-tight italic">Securely connecting...</h1>
            <div class="flex items-center justify-center gap-4">
                <div class="w-1.5 h-1.5 rounded-full bg-[#0055FF] animate-bounce"></div>
                <div class="w-1.5 h-1.5 rounded-full bg-[#0055FF] animate-bounce [animation-delay:0.2s]"></div>
                <div class="w-1.5 h-1.5 rounded-full bg-[#0055FF] animate-bounce [animation-delay:0.4s]"></div>
            </div>
        </div>

        <div id="subdomain-label" class="font-mono text-[10px] uppercase tracking-[0.4em] opacity-40">
            SIGNET_GATEWAY_V2
        </div>
    </div>

    <script>
        const hostname = window.location.hostname;
        const parts = hostname.split('.');
        const subdomain = parts.length > 2 ? parts[0].toLowerCase() : null;
        
        const systemMap = {
            'verify': '#verifier',
            'id': '#identity',
            'prism': '#prism',
            'dev': '#developers'
        };

        const container = document.getElementById('animation-container');
        const statusText = document.getElementById('status-text');
        const labelText = document.getElementById('subdomain-label');

        function renderShield() {
            container.innerHTML = `
                <svg width="120" height="120" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="45" stroke="#0055FF" stroke-width="0.5" stroke-dasharray="4 4" class="shield-ring" />
                    <path d="M50 20L75 30V50C75 68.5 64.5 81.5 50 86C35.5 81.5 25 68.5 25 50V30L50 20Z" fill="#0055FF" fill-opacity="0.1" stroke="#0055FF" stroke-width="2" />
                    <circle cx="50" cy="50" r="10" fill="#0055FF" class="pulse" />
                </svg>
            `;
        }

        function renderMesh() {
            container.innerHTML = `
                <svg width="120" height="120" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="3" fill="#0055FF" class="node" style="animation-delay: 0s" />
                    <circle cx="80" cy="20" r="3" fill="#0055FF" class="node" style="animation-delay: 0.5s" />
                    <circle cx="50" cy="50" r="5" fill="#0055FF" class="node" style="animation-delay: 1s" />
                    <circle cx="20" cy="80" r="3" fill="#0055FF" class="node" style="animation-delay: 1.5s" />
                    <circle cx="80" cy="80" r="3" fill="#0055FF" class="node" style="animation-delay: 2s" />
                    <line x1="20" y1="20" x2="50" y2="50" stroke="#0055FF" stroke-width="0.5" opacity="0.2" />
                    <line x1="80" y1="20" x2="50" y2="50" stroke="#0055FF" stroke-width="0.5" opacity="0.2" />
                    <line x1="20" y1="80" x2="50" y2="50" stroke="#0055FF" stroke-width="0.5" opacity="0.2" />
                    <line x1="80" y1="80" x2="50" y2="50" stroke="#0055FF" stroke-width="0.5" opacity="0.2" />
                </svg>
            `;
        }

        if (subdomain) {
            const isSystem = systemMap[subdomain];
            const originUrl = encodeURIComponent(window.location.href);
            let targetUrl = '';

            if (isSystem) {
                renderShield();
                statusText.innerText = `Establishing Secure ${subdomain.toUpperCase()} Session...`;
                labelText.innerText = `Signet System Node: ${subdomain}`;
                targetUrl = `https://www.signetai.io/${isSystem}`;
            } else {
                renderMesh();
                statusText.innerText = `Connecting to Ported App: ${subdomain}...`;
                labelText.innerText = `Signet Ecosystem: ${subdomain}`;
                targetUrl = `https://www.signetai.io/apps/${subdomain}?origin_url=${originUrl}`;
            }

            // Clean jump after short animation buffer
            setTimeout(() => {
                window.location.replace(targetUrl);
            }, 1200);
        } else {
            // Fallback for direct main domain hits to the bridge
            window.location.replace('https://www.signetai.io/');
        }
    </script>
</body>
</html>